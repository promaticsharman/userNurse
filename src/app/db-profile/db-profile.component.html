<app-db-header></app-db-header>

<div class="wrapper_shala dashbrd_main">

	<section class="wraper_dashbaord ">
		<div class="custom_container">
			<div class="row">

				<div class="col-sm-3">
					<app-db-sidebar></app-db-sidebar>
				</div>

				<div class="col-sm-9">
					<div class="dshbrd_wraper_main">
						<div class="card_contnt prof_page">
							<!-- chnage page class -->
							<div class="pag_ttl">
								<h2 class="pos_rel">My Profile
									<a class="cp edt_cp" (click)="editDetails()"><i class="fa fa-edit"></i> Edit</a>
								</h2>
							</div>
							<!-- main work area -->
							<div class="db_cntn_wraper">
								<div class="prfoile_wraped card">
									<!-- <div class="user_meta_db d-flex align-items-center">
										<img src="assets/imgs/bnr1.jpg" class="img-fluid">
									</div> -->
									<form [formGroup]="dbProfile" (ngSubmit)="onSubmit()">
										<div class="row">
											<div class="col-sm-3">
												<div class="form-group">
													<!-- {{}} -->
													<label>First Name</label>
													<input type="text" name="firstName" class="form-control"
														formControlName="firstName" [readonly]="!edit">
													<span class="text-danger"
														*ngIf="(dbProfileControl.firstName.touched || submitted) && dbProfileControl.firstName.errors?.required">
														First Name is Required
													</span>
												</div>
											</div>
											<div class="col-sm-3">
												<div class="form-group">
													<label>Last Name</label>
													<input type="text" name="" class="form-control"
														formControlName="lastName" [readonly]="!edit">
													<span class="text-danger"
														*ngIf="(dbProfileControl.lastName.touched || submitted) && dbProfileControl.lastName.errors?.required">
														Last Name is Required
													</span>
												</div>
											</div>
											<div class="col-sm-6">
												<div class="form-group">
													<label>Address</label>
													<input type="text" name="" class="form-control"
														formControlName="address" [readonly]="!edit">
													<span class="text-danger"
														*ngIf="(dbProfileControl.address.touched || submitted) && dbProfileControl.address.errors?.required">
														Address is Required
													</span>
												</div>
											</div>
										</div>
										<div class="row">
											<div class="col-sm-6">
												<div class="form-group">
													<label>Mobile Number</label>
													<input type="text" name="" class="form-control"
														formControlName="mobileNo" [readonly]="!edit">
													<!-- {{dbProfileControl.mobileNo.errors | json}} -->
													<span class="text-danger"
														*ngIf="(dbProfileControl.mobileNo.touched || submitted) && dbProfileControl.mobileNo.errors?.required">
														Mobile Number is Required
													</span>
												</div>
											</div>
											<!-- <div class="col-sm-3">
                                        		<div class="form-group">
		                                            <label>City</label>
		                                            <input type="text" name="" class="form-control">
		                                        </div>
	                                        </div> -->
											<!-- <div class="col-sm-3">
                                        		<div class="form-group">
		                                            <label>Country</label>
		                                            <input type="text" name="" class="form-control">
		                                        </div>
		                                    </div> -->
										</div>
										<div class="row">
											<div class="col-sm-6">
												<div class="form-group">
													<label>Email</label>
													<input type="text" name="" class="form-control"
														formControlName="emailID" [readonly]="true">
													<span class="text-danger"
														*ngIf="(dbProfileControl.emailID.touched || submitted) && dbProfileControl.emailID.errors?.required">
														Email is Required
													</span>
													<span class="text-danger"
														*ngIf="(dbProfileControl.emailID.touched || submitted) && dbProfileControl.emailID.errors?.email">
														Email is not Valid
													</span>
												</div>
											</div>
											<!-- <div class="col-sm-3">
                                        		<div class="form-group">
		                                            <label>State</label>
		                                            <input type="text" name="" class="form-control">
		                                        </div>
	                                        </div> -->
											<!-- <div class="col-sm-3">
                                        		<div class="form-group">
		                                            <label>Zip</label>
		                                            <input type="text" name="" class="form-control">
		                                        </div>
		                                    </div> -->
										</div>
										<div class="link_anchr row mt-3">
											<div class="col-sm-6">
												<div class="">
													<p><a class="acc_log"
															style="color: #f41424; text-decoration: underline;"
															(click)="showModel()">Change account
															Password</a></p>
													<!-- data-toggle="modal" data-target="#exampleModal" -->
													<p><a class="acc_log"
															style="color: #f41424; text-decoration: underline;"
															(click)="showEmailModel()">Change Registered Email</a></p>
												</div>
											</div>
											<div class="col-sm-6">
												<div class="sub_btn text-right">
													<button class="btn btn_theme" type="submit" [disabled]="!edit"
														(click)="onSubmit()">Submit</button>
												</div>
											</div>
										</div>
									</form>
								</div>
							</div>
							<!-- main work area -->
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
	<!-- footer starts -->
	<app-footer></app-footer>
	<!-- footer ends -->
</div>

<!-- Password Modal -->
<div class="modal fade" id="passwordModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
	aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h2 class="modal-title" id="exampleModalLabel">Change Password</h2>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<div class="form-group">
					<label>Old Password</label>
					<input type="password" name="" class="form-control" placeholder="Old password"
						[(ngModel)]="old_password">
					<span class="text-danger" *ngIf="!old_password && pass_submitted">
						Please fill old password
					</span>
					<span class="text-danger" *ngIf="incorrectPassword">
						Incorrect Old Password
					</span>
				</div>
				<div class="form-group">
					<label>New Password</label>
					<input type="password" name="" class="form-control" placeholder="New password"
						[(ngModel)]="new_password">
					<span class="text-danger" *ngIf="!old_password && pass_submitted">
						Please fill new password
					</span>
				</div>
				<!-- <input type="text" name="" class="form-control" placeholder="New password"> -->
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
				<button type="button" class="btn btn-primary" (click)="changePassword()">Save changes</button>
			</div>
		</div>
	</div>
</div>

<!-- Email Modal -->
<div class="modal fade" id="emailModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
	aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h2 class="modal-title" id="exampleModalLabel">Change Email Id</h2>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<form class="modal-body" [formGroup]="emailForm">
				<div class="form-group" >
					<label>Email</label>
					<input type="text" class="form-control" placeholder="Enter email" formControlName="email">
					<span class="text-danger"
						*ngIf="(emailFormControl.email.touched || emailsubmit) && emailFormControl.email.errors?.required">
						Email is Required
					</span>
					<span class="text-danger"
						*ngIf="(emailFormControl.email.touched || emailsubmit) && emailFormControl.email.errors?.email">
						Email is not Valid
					</span>
					<span class="text-danger"  *ngIf="emailExist">
						Email is already exist
					</span>
				</div>
			</form>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
				<button type="button" class="btn btn-primary" (click)="changeEmail()">Save changes</button>
			</div>
		</div>
	</div>
</div>